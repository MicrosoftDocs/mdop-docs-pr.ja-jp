---
title: 操作のトラブルシューティング
description: 操作のトラブルシューティング
author: dansimp
ms.assetid: 948d7869-accd-44da-974f-93409234dee7
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: 126b5fae517c59914dcb7fb155ef4ad47278b5bd
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/26/2020
ms.locfileid: "10812739"
---
# 操作のトラブルシューティング


このトピックでは、Microsoft Enterprise デスクトップ仮想化 (MED-V) 2.0 での一般的な操作の問題のトラブルシューティングに役立つ情報について説明します。

## MED-V 操作の問題のトラブルシューティング


以下は、エンドユーザーが MED-V とソリューションを実行したときに発生する可能性のある問題のうち、これらの問題のトラブルシューティングに役立ついくつかの問題を示しています。

**ドキュメントのリダイレクションは失敗**します。 通常、この問題は、エンドユーザーの [マイドキュメント] フォルダーがネットワーク上の場所をポイントしている場合に発生します。 Windows では、別の共有フォルダーからの共有の作成はサポートされていません。 ドライブまたはフォルダーがゲストにリダイレクトされると、RDP\\Windows Virtual PC でそのフォルダーの共有が作成されます。 したがって、ホストの [マイドキュメント] フォルダーで既に共有をポイントしている場合、RDP\\Windows Virtual PC で共有の共有を作成することはできません。

この問題の別の原因として、ネットワークリソースに接続するために必要な資格情報が、ユーザーのドメイン資格情報と異なる場合があります。 MED は、ホストでドキュメントがリダイレクトされたことを検出し、その情報をゲストに送信して、ネットワークリソースを再接続する場合があります。 ユーザーの資格情報が認証されない場合、MED-V で認証の試行が停止することがあります。

**解決策**

この問題を解決するには、次のいずれかの操作を実行します。

-   Active Directory 内のユーザーのルートディレクトリを設定します。 その後、ゲストとホストは同じネットワークリソースに接続する必要があります。

-   [マイドキュメント] フォルダーを UNC パスにリダイレクトする代わりに、それをドライブ文字にマップします (ホスト上で、ネットワークリソースをポイントするドライブをマップします)。 次に、[マイドキュメント] フォルダーを UNC パスの代わりにドライブ文字を使用するように設定できます。 その後、ゲストは、同じマップされたドライブに期待どおりにリダイレクトします。

-   ゲストで、[マイドキュメント] フォルダーをネットワークリソースにリダイレクトするスタートアップスクリプトを作成し、必要に応じて追加の資格情報を提供します。

**URL リダイレクションは失敗**します。 ホストからゲストへのリダイレクト用に指定した URL が、意図したとおりにリダイレクトされないか、web サイトが存在しないことを示すエラーメッセージが返されます。

**解決策**

このエラーは、URL リダイレクション情報にスペルミスがあるか、アスタリスク (\ *) などの文字が間違って使用されている場合に発生する可能性があります。 URL リダイレクションのレジストリ値を確認し、誤りがあれば修正します。

レジストリキーが呼び出され、通常、次の場所 `RedirectUrls` にあります。

Computer¥¥ \ Key\ _LOCAL \ _MACHINE ¥¥¥¥¥¥¥¥¥ |

**タスクバーのアイコンが誤解を招く**ことがあります。 既定では、公開されたアプリケーションとリダイレクトされた Url について、エンドユーザーのタスクバーに表示されるアイコンは、Windows 仮想 PC のアイコンです。 エンドユーザーがこのような既定の動作を認識していない場合は、タスクバーを見てアプリを見つけたときに、混乱を招く可能性があります。

**解決策**

この既定の動作を回避する唯一の方法は、次のようにタスクバーのプロパティのユーザー設定を変更することです。

1.  タスクバーを右クリックし、[**プロパティ**] をクリックします。

2.  [**タスクバーと [スタート] メニューのプロパティ**] ダイアログボックスで、[**タスクバー** ] タブをクリックします。

3.  [**タスクバーのボタン**] ボックスのドロップダウンバーで、[**結合しない**] を選択します。

4.  **[OK]** をクリックします。

公開アプリケーションの予期しているアイコンとリダイレクトされた Url が表示されます。

**2 人目のユーザーがログオンを試みた場合、または仮想マシンが使用されて**いる場合に警告が表示されます。 最初のユーザーが MED-V を実行しているときに、2番目のユーザーが MED-V ワークスペースにログオンすると、警告メッセージが発行されます。 また、仮想マシンを使用している間に MED-V が開始されている場合 (たとえば、[**スタート**] メニューで [WINDOWS 仮想 PC] から仮想マシンを起動した場合など) も、警告が発生します。 エンドユーザーが警告メッセージを受け取ると、MED-V はシャットダウンします。

**解決策**

エンドユーザーは、ログオンを試みる前に、他のすべてのユーザーが MED-V からログオフすることを確認する必要があります。 これにより、MED-V の他のインスタンスが実行されておらず、Windows 仮想 PC が仮想マシンの制御に含まれていないことを確認します。

**初回のセットアップ時にビープ音が鳴り**ます。 場合によっては、MED-V が最初に実行されているときにビープ音が聞こえます。 これは、エンドユーザーの混乱を招く可能性があります。 ビープ音は、シャットダウンなどの特定の操作を実行したときに仮想マシンから発生したことを示します。

**解決策**

各仮想マシンの開始シーケンスの先頭に「net stop beep」コマンドを指定して、ビープサービスを停止できます。 または、"sc config beep start = disabled" コマンドを指定して、ビープサービスを無効にすることもできます。 これらのコマンドは、画像を封印する前か、Sysprep の一部として指定できます。

**ブリッジモードの Med-v ワークスペース用に複数のネットワーク接続が作成さ**れます。 初めてセットアップするときに、NAT モード用に構成されている MED-V ワークスペースを作成した場合、Windows 仮想 PC では1つのネットワーク接続のみが作成されます。 ただし、初めてセットアップするときに、ブリッジモード用に構成されている MED-V ワークスペースを作成している場合は、コンピューターにインストールされているネットワークアダプターごとに個別のネットワーク接続が作成されます。これにより、MED-V は、どのネットワークアダプターがアクティブであるかを判断できないためです。 これにより、ローミングユーザーは常に有線およびワイヤレス接続用のネットワークアダプターを使うことができます。

**解決策**

なし。

**終了時に、Med-v アプリケーションが長すぎて応答**しません。 場合によっては、終了しようとしているときに、MED-V アプリケーションが応答を停止することがあります。

**解決策**

WaitToKillAppTimeout が応答しなくなったアプリケーションを閉じるまでの時間の長さを指定するには、ゲスト仮想マシンのレジストリキーを設定します。 詳細については、「 [WINDOWS XP でプロセスを正常に終了するために、シャットダウン時間を延長する方法](https://go.microsoft.com/fwlink/?LinkId=206819)」を参照してください https://go.microsoft.com/fwlink/?LinkId=206819) 。

**ゲスト仮想マシンで公開されたアプリケーションのショートカットの名前を変更しても、ホストの公開された名前は変更されません**。 ショートカットを作成してアプリケーションを公開し、ゲスト仮想マシンのショートカットの名前を変更すると、元のアプリケーション名はホストの [**スタート**] メニューに残ります。 プログラムは期待どおりに実行されますが、プログラムは常に元の名前を保持します。

**解決策**

なし。 これは、Windows 仮想 PC の既知の動作です。

**ゲスト仮想マシンのショートカットを移動しても、ホストコンピューターの [スタート] メニューの場所は更新されません**。 ホストコンピューターの [**スタート**] メニューに公開されている med-v アプリケーションのショートカットは、レジストリにカタログ登録されます。 アプリケーションのショートカットをサブフォルダーに移動しても、その変更を反映するようにレジストリが更新されることはありません。

**解決策**

MED-V アプリケーションショートカットの場所を変更するには、次の手順を実行します。

1.  MED-V が実行されている場合は、MED-V ゲスト仮想マシンで Windows エクスプローラーを開きます。

2.  "%ALLUSERSPROFILE%\\Start menu¥ Programs" ディレクトリを参照します。

3.  [スタート] メニューまたは [プログラム] フォルダーからアプリケーションのショートカットを移動します。

4.  約30秒後に、ホストコンピューターの [**スタート**] メニューからショートカットが削除されていることを確認します。

5.  アプリケーションのショートカットを、[スタート] メニューの [プログラム] ディレクトリの下にある新しいプログラムフォルダーに戻します。

6.  約30秒後に、ホストコンピューターの [**スタート**] メニューでショートカットが更新されていることを確認します。

**公開されたアプリケーションは、アイドル状態になるとタイムアウトする可能性が**あります。 場合によっては、公開されたアプリケーションがしばらくアイドル状態になっていると、時間がかかることがあります。 この状況は、IPsec が有効であり、MED-V ワークスペースが NAT モードで構成されている場合にのみ発生します。 この状況は、ブリッジモードで実行している場合は発生しません。

**解決策**

NAT モードで MED-V ワークスペースを実行している場合は、IPsec を無効にします。

**公開されたアプリケーションをタスクバーにピン留めするのは、med-v をバイパス**します。 エンドユーザーが公開されたアプリケーションをタスクバーにピン留めしてアプリケーションを閉じると、次にアプリケーションをタスクバーアイコンから開いたときに MED-V がバイパスされます。 代わりに、アプリケーションは VMSAL ウィンドウで直接開きます。

**解決策**

MED-V に公開されているアプリケーションをタスクバーにピン留めしないでください。

## 関連トピック


[MED-V 操作のセキュリティのベスト プラクティス](security-best-practices-for-med-v-operations.md)

[展開のトラブルシューティング](deployment-troubleshooting.md)

 

 





