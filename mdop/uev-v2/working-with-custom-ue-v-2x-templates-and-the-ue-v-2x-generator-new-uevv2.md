---
title: カスタム ue-v (ue-v) テンプレートと UE-V Generator を使って作業する
description: カスタム ue-v (ue-v) テンプレートと UE-V Generator を使って作業する
author: dansimp
ms.assetid: f0bb4920-0132-472c-a564-abf06a884275
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: a8d863896e4ccfa92161f8a8f5e2b8955f139872
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/26/2020
ms.locfileid: "10819294"
---
# カスタム ue-v (ue-v) テンプレートと UE-V Generator を使って作業する


ユーザーコンピューター間のアプリケーション設定を同期するには、Microsoft User Experience Virtualization (UE-V) 2.0、2.1、および 2.1 SP1 では、*設定場所テンプレート*を使用します。 ユーザーエクスペリエンスの仮想化には、一部の設定場所テンプレートが含まれています。 また、UE-V Generator を使用して、カスタム設定の場所テンプレートを作成、編集、または検証することもできます。

UE-V Generator は、Windows デスクトップアプリケーションを監視して、アプリケーションの設定が保存されている場所を検出し、キャプチャします。 監視されるアプリケーションはデスクトップアプリケーションである必要があります。 UE-V Generator は、次の種類のアプリケーションの設定場所テンプレートを作成できません。

-   仮想化されたアプリケーション

-   ターミナルサービスを通じて提供されるアプリケーション

-   Java アプリケーション

-   Windows アプリ  

このトピック

**標準設定と非標準設定の場所:** UE-V Generator は、アプリケーションが設定情報を格納するために使用する設定ファイルとレジストリ設定を検索する場所を特定するのに役立ちます。 ジェネレーターは、標準ユーザーがアクセスできる場所にある設定のみを検出します。 他の場所に保存されている設定は除外されます。 検出された設定は、**標準**と**非標準**の2つのカテゴリに分類されます。 同期には標準設定をお勧めし、UE-V では簡単にキャプチャして適用することができます。 標準以外の設定では、設定を同期することはできますが、UE-V で使用されているルールのため、これらの設定が一貫していないか、確実同期設定になっている可能性があります。 これらの設定は、一時ファイルに依存する場合や、信頼性の低い同期の結果である場合や、役に立たない場合もあります。 これらの設定の場所は、UE-V ジェネレーターで示されます。 ケースバイケースごとに、それらを含めるか除外するかを選ぶことができます。

UE-V Generator は、アプリを検出プロセスの一部として開きます。 ジェネレーターは、次の場所で設定をキャプチャできます。

-   **レジストリ設定**– HKEY の下にあるレジストリの場所 \ **_CURRENT \ _USER**

-   **アプリケーション設定ファイル**– \ \ **Users** \ \ [ユーザー名 \] に保存されているファイル (\ \ の場合) \ \ **AppData**  \\  **ローミング**

UE-V Generator では、場所を除外します。これは、一般的にはアプリケーションソフトウェアファイルを保存しますが、ユーザーのコンピューターまたは環境間で適切に同期されることはありません。 UE-V Generator では、これらの場所は除外されます。 除外する場所は次のとおりです。

-   HKEY \ _CURRENT \ _USER のレジストリキーと、ログオンしたユーザーが値を書き込むことができないファイル

-   HKEY \ _CURRENT \ _USER のレジストリキーと、Windows オペレーティングシステムのコア機能に関連付けられているファイル

-   HKEY \ _LOCAL \ _MACHINE hive に含まれているすべてのレジストリキーで、管理者権限が必要であり、ユーザーアカウント制御 (UAC) 契約の設定が必要になることがあります。

-   Program Files ディレクトリにあるファイル。管理者権限が必要であり、UAC 契約の設定が必要になる可能性があるファイル

-   ユーザー名 \ \ \ [ユーザー名 \] の下にあるファイル。

-   % Systemroot% にある Windows オペレーティングシステムファイル。管理者権限が必要であり、UAC 契約の設定が必要な可能性があります。

これらの場所に格納されているレジストリキーとファイルがアプリケーション設定を同期するために必要な場合は、除外された場所をテンプレートの作成プロセス中に手動で追加できます (ただし、HKEY \ _LOCAL \ _MACHINE ハイブのレジストリエントリは除きます)。

## <a href="" id="edit"></a>UE-V Generator を使用して設定場所テンプレートを編集する


UE-V Generator を使って、設定場所テンプレートを編集します。 UE-V Generator を使用して、変更された設定がテンプレートに追加されると、そのテンプレート内のバージョン情報が自動的に更新され、企業に展開されている既存のテンプレートが正しく更新されるようになります。

**注** Ue-v 2 のジェネレーターを使って UE-V 1.0 テンプレートを編集する場合、テンプレートは自動的に UE-V 2 テンプレートに変換されます。 UE-V 1.0 エージェントは、編集済みのテンプレートを使用できなくなりました。

 

**Ue-v のジェネレーターを使用して UE-V 設定の場所テンプレートを編集するには**

1.  [**スタート**] をクリックし、[**すべてのプログラム**]、[ **microsoft user Experience Virtualization**]、[ **microsoft user experience virtualization Generator**] の順にクリックします。

2.  [**設定の場所テンプレートの編集] を**クリックします。

3.  最近使用したテンプレートの一覧で、編集するテンプレートを選択します。 または、[**参照**] をクリックして設定テンプレートファイルを検索します。 **[Next]** をクリックして続行します。

4.  設定テンプレートの**プロパティ**、**レジストリ**の場所、**ファイル**の場所を確認します。 必要に応じて編集します。

    -   [**プロパティ**] タブでは、次のプロパティを表示して編集できます。

        -   [ **Application name**]: プログラムファイルプロパティの説明に記載されているアプリケーション名。

        -   [ **Program name**]: プログラムファイルのプロパティから取得したプログラムの名前。 通常、この名前には .exe ファイル名拡張子が付きます。

        -   [**製品バージョン**: アプリケーションの .exe ファイルの製品バージョン番号。 このプロパティは、**ファイルバージョン**と共に、設定場所テンプレートのターゲットとなるアプリケーションを決定するのに役立ちます。 このプロパティは、メジャーバージョン番号を受け取ります。 このプロパティが空の場合、[設定の場所] テンプレートは製品のすべてのバージョンに適用されます。

        -   **ファイルのバージョン**: アプリケーションの .exe ファイルのファイルバージョン番号。 このプロパティは**製品バージョン**と共に、設定場所テンプレートによって対象となるアプリケーションを特定するのに役立ちます。 このプロパティは、メジャーバージョン番号を受け取ります。 このプロパティが空の場合は、設定の場所テンプレートがプログラムのすべてのバージョンに適用されます。

        -   **テンプレート作成者の名前**(省略可能): 設定テンプレートの作成者の名前。

        -   **テンプレート作成者のメール**(オプション): 設定場所テンプレートの作成者のメールアドレス。

    -   [**レジストリ**] タブには、設定場所テンプレートに含まれているレジストリの場所の**キー**と**範囲**が一覧表示されます。 [**タスク**] ドロップダウンメニューを使用して、レジストリの場所を編集できます。 [タスク] メニューで、新しいキーの追加、既存のキーの名前または範囲の編集、キーの削除、キーが存在するレジストリの参照を行うことができます。 レジストリのスコープを定義するときは、**すべての設定**のスコープを使用して、指定したキーの下にすべてのレジストリ設定を含めることができます。 **すべての設定**と**サブ**キーを使用して、指定したキー、サブキー、サブキーの設定の下にすべてのレジストリ設定を含めることができます。

    -   [**ファイル**] タブには、設定場所テンプレートに含まれているファイルの場所のファイルパスとファイルマスクが一覧表示されます。 [**タスク**] ドロップダウンメニューを使用して、ファイルの場所を編集できます。 [ファイルの場所] の [**タスク**] メニューでは、新しいファイルまたはフォルダーの場所を追加したり、既存のファイルまたはフォルダーの範囲を編集したり、ファイルまたはフォルダーを削除したり、エクスプローラーで選択した場所を開くことができます。 指定したフォルダーにあるすべてのファイルを含めるには、ファイルのマスクを空のままにします。

5.  [**保存**] をクリックして、設定場所テンプレートの変更を保存します。

6.  [**閉じる**] をクリックして、設定テンプレートウィザードを閉じます。 UE-V Generator アプリケーションを終了します。

    アプリケーションの設定場所テンプレートを編集したら、テンプレートをテストする必要があります。 組織内の運用環境に配置する前に、ラボ環境で変更された設定場所のテンプレートを展開します。

**設定場所テンプレートを手動で編集する方法**

1.  設定場所テンプレート .xml ファイルのローカルコピーを作成します。 UE-V settings location テンプレートは、アプリケーションストアの設定値が格納されている場所を識別する .xml ファイルです。

    **注** 設定場所テンプレートは、テンプレート**ID**のために一意です。 テンプレートをコピーして .xml ファイルの名前を変更した場合、UE-V は、.xml ファイルのファイル名ではなく名前を確認するために、.xml ファイル内のテンプレート**ID**タグを読み取るために失敗します。 また、UE-V は、変更されたものがあるかどうかを確認する**バージョン**番号も読み取ります。 バージョン番号が大きい場合は、UE-V によってテンプレートが更新されます。

     

2.  XML エディターを使用して設定場所テンプレートファイルを開きます。

3.  設定場所テンプレートファイルを編集します。 すべての変更は、 [Settingslocationtempate](https://technet.microsoft.com/library/dn763947.aspx)で定義されている ue-v スキーマファイルに準拠している必要があります。 既定では、.xsd ファイルのコピーは、¥¥ programdata¥ microsoft templates にあります。

4.  設定場所テンプレートの**バージョン**番号をインクリメントします。

5.  設定場所テンプレートファイルを保存してから、XML エディターを閉じます。

6.  UE-V Generator を使用して、変更された設定場所テンプレートファイルを検証します。

7.  クライアントコンピューター間で設定を同期できるようにするには、編集した UE-V 設定の場所テンプレートを登録する必要があります。 テンプレートを登録するには、Windows PowerShell を開き、次のコマンドレットを実行し `update-uevtemplate [templatefilename]` ます。 次に、ファイルを設定のストレージカタログにコピーできます。 ユーザーのコンピューター上の UE-V エージェントは、スケジュールされたタスクでスケジュールどおりに更新する必要があります。

## <a href="" id="validate"></a>UE-V Generator を使用して設定場所テンプレートを検証する


UE-V Generator を使わずに、XML エディターで設定場所テンプレートを作成または編集することができます。 その場合は、UE-V Generator を使って、新しい XML または変更された XML が、テンプレートに対して定義されているスキーマと一致するかどうかを検証できます。

**Ue-v Generator を使用して UE-V 設定の場所テンプレートを検証するには**

1.  [**スタート**] をクリックし、[**すべてのプログラム**]、[ **microsoft user Experience Virtualization**]、[ **microsoft user experience virtualization Generator**] の順にクリックします。

2.  [**設定の場所テンプレートの検証] を**クリックします。

3.  最近使用したテンプレートの一覧で、編集するテンプレートを選択します。 または、設定テンプレートファイルを**参照**することもできます。 **[Next]** をクリックして続行します。

4.  続行するには、[**検証**] をクリックします。

5.  [**閉じる**] をクリックして、設定テンプレートウィザードを閉じます。 UE-V Generator アプリケーションを終了します。

    アプリケーションの設定場所テンプレートを検証したら、テンプレートをテストする必要があります。 ラボ環境にテンプレートを展開してから、エンタープライズの運用環境に配置します。

## <a href="" id="share"></a>テンプレートギャラリーを使用して設定場所テンプレートを共有する


Microsoft User Experience Virtualization (UE-V) 2.0 テンプレートギャラリーでは、管理者が UE-V 設定の場所テンプレートを共有できます。 ギャラリーでは、他のユーザーが使用できるように設定場所テンプレートをアップロードすることができます。また、他のユーザーが作成したテンプレートをダウンロードすることもできます。 UE-V テンプレートギャラリーは、[ここ](https://go.microsoft.com/fwlink/p/?LinkId=246589)に記載されています。

UE-V テンプレートギャラリーで設定場所テンプレートを共有する前に、個人情報や会社情報が含まれていないことを確認してください。 任意の XML ビューアーを使って、設定場所テンプレートファイルの内容を開いて表示することができます。 組織外のユーザーとテンプレートを共有するには、次のテンプレート値を確認する必要があります。

-   テンプレート作成者名–テンプレートの作成者名の一般的な非識別名を指定するか、テンプレートからこのデータを除外します。

-   テンプレート作成者のメール–一般的な非識別テンプレート作成者のメールを指定するか、テンプレートからこのデータを除外します。

UE-V ギャラリーからダウンロードした設定場所テンプレートを展開する前に、まず、テスト環境でアプリケーション設定が正しく同期されていることを確認するために、テンプレートをテストする必要があります。






## 関連トピック


[UE-V 2. x の管理](administering-ue-v-2x-new-uevv2.md)

[カスタムアプリケーションの UE-V 2. x の展開](deploy-ue-v-2x-for-custom-applications-new-uevv2.md)

 

 





