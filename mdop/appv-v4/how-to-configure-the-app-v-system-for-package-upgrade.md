---
title: App-V システムをパッケージのアップグレード用に構成する方法
description: App-V システムをパッケージのアップグレード用に構成する方法
author: dansimp
ms.assetid: de133898-f887-46c1-9bc9-fbb03feac66a
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 06/16/2016
ms.openlocfilehash: 5e5056f923c61aff39d9bd6e1d26f071177f7c12
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/26/2020
ms.locfileid: "10817847"
---
# <span data-ttu-id="98782-103">App-V システムをパッケージのアップグレード用に構成する方法</span><span class="sxs-lookup"><span data-stu-id="98782-103">How to Configure the App-V System for Package Upgrade</span></span>


<span data-ttu-id="98782-104">App-v Sequencer でアップグレードされた既存のアプリケーションパッケージの新しいバージョンを展開すると、アプリの V クライアントが自動的に新しいバージョンをローカルキャッシュにストリーミングできるように、アプリを展開することができます。</span><span class="sxs-lookup"><span data-stu-id="98782-104">When you deploy a new version of an existing application package that has been upgraded in the App-V Sequencer, you can deploy it so that the App-V clients automatically stream the new version to the local cache.</span></span> <span data-ttu-id="98782-105">使用しているストリーミングソリューションに応じて、パッケージのアップグレードを構成するためのさまざまな手順があります。</span><span class="sxs-lookup"><span data-stu-id="98782-105">Depending on the streaming solution you use, there are different procedures for configuring the package upgrade.</span></span> <span data-ttu-id="98782-106">以下のセクションでは、発行とストリーミングの最も一般的なシナリオについて説明し、各シナリオでパッケージのアップグレードを構成するために必要な手順を示します。</span><span class="sxs-lookup"><span data-stu-id="98782-106">The following sections describe the most typical scenarios for publishing and streaming, and include the procedures necessary for configuring the package upgrade for each scenario.</span></span>

## <span data-ttu-id="98782-107">パブリッシングとストリーミングの両方で管理サーバーを使用する</span><span class="sxs-lookup"><span data-stu-id="98782-107">Using a Management Server for both publishing and streaming</span></span>


<span data-ttu-id="98782-108">このシナリオでは、パッケージとアプリケーションの発行とストリーミングの両方に1つの App-v 管理サーバーが使用され、RTSP (S) プロトコルが必要です。</span><span class="sxs-lookup"><span data-stu-id="98782-108">In this scenario, a single App-V Management Server is used for both publishing and streaming of packages and applications, and the RTSP(S) protocol is required.</span></span> <span data-ttu-id="98782-109">元のパッケージが App-v 管理サーバーにインポートされると、管理者は、sequencer によって作成されたファイルを含むパッケージフォルダーをコンテンツフォルダー (たとえば、\\\\server\\CONTENT\\packagename.) にコピーします。</span><span class="sxs-lookup"><span data-stu-id="98782-109">When the original package is imported to the App-V Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="98782-110">また、管理者は、パッケージフォルダーの SFT ファイルをポイントするように OSD ファイルの HREF エントリを編集し、そのパッケージをサーバーにインポートします。</span><span class="sxs-lookup"><span data-stu-id="98782-110">The administrator also edits the HREF entry in the OSD file to point to the SFT file in the package folder, and then imports the package to the server.</span></span>

<span data-ttu-id="98782-111">ユーザーが管理サーバーによって認証されると、サーバーはクライアントに applist.xml ファイルを送信してユーザーのアプリケーションを公開します。</span><span class="sxs-lookup"><span data-stu-id="98782-111">When a user is authenticated by the Management Server, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="98782-112">次に、クライアントは、管理サーバーからアプリケーションの OSD ファイルとアイコンを取得します。</span><span class="sxs-lookup"><span data-stu-id="98782-112">The client then retrieves the OSD files and icons for the applications from the Management Server.</span></span> <span data-ttu-id="98782-113">ユーザーがアプリケーションアイコンをダブルクリックすると、アプリケーションコンテンツは、OSD ファイルで指定されたパスからクライアントキャッシュにストリーミングされ、アプリケーションが開始されます。</span><span class="sxs-lookup"><span data-stu-id="98782-113">When the user double-clicks an application icon, the application content is streamed to the client cache from the path that is specified in the OSD file, and the application is started.</span></span>

### <span data-ttu-id="98782-114">パッケージをアップグレードするには</span><span class="sxs-lookup"><span data-stu-id="98782-114">To upgrade the package</span></span>

<span data-ttu-id="98782-115">App-v Sequencer でアップグレードされたアプリケーションの新しいバージョンを追加するには、管理者は、新しい SFT ファイルとその他の変更されたファイルを元のバージョンのアプリケーションと同じフォルダーにコピーする必要があります。</span><span class="sxs-lookup"><span data-stu-id="98782-115">To add a new version of an application that has been upgraded in the App-V Sequencer, the administrator must copy the new SFT file and any other modified files to the same folder as the original version of the application.</span></span> <span data-ttu-id="98782-116">次に、管理者は、サーバー管理コンソールで [**バージョンの追加**] を使用して、新しいバージョンのパッケージを追加します。</span><span class="sxs-lookup"><span data-stu-id="98782-116">The administrator will then use **Add Version** in the server management console to add the new version of the package.</span></span>

<span data-ttu-id="98782-117">ユーザーが次にアプリケーションを起動すると、サーバーはクライアントに対して自動的に新しいバージョンをストリームします。</span><span class="sxs-lookup"><span data-stu-id="98782-117">When the user next starts the application, the server streams the new version to the client automatically.</span></span> <span data-ttu-id="98782-118">このパッケージのアップグレードの具体的な方法は、以前はアクティブなアップグレードと呼ばれていました。</span><span class="sxs-lookup"><span data-stu-id="98782-118">This specific method of upgrading a package was formerly known as an active upgrade.</span></span>

## <span data-ttu-id="98782-119">管理サーバーを公開用に使用し、ストリーミングをストリーミングサーバーで行う</span><span class="sxs-lookup"><span data-stu-id="98782-119">Using a Management Server for publishing and a Streaming Server for streaming</span></span>


<span data-ttu-id="98782-120">このシナリオでは、App-v Management Server を使ってパッケージを公開し、ストリーミングサーバーをストリーミングパッケージとアプリケーションに使用します。</span><span class="sxs-lookup"><span data-stu-id="98782-120">In this scenario, the App-V Management Server is used for publishing the packages, and the Streaming Server is used for streaming packages and applications.</span></span> <span data-ttu-id="98782-121">RTSP (S) プロトコルが必要です。</span><span class="sxs-lookup"><span data-stu-id="98782-121">The RTSP(S) protocol is required.</span></span> <span data-ttu-id="98782-122">管理サーバーに元のパッケージがインポートされると、管理者は、sequencer によって作成されたファイルを含むパッケージフォルダーをコンテンツフォルダー (たとえば、\\\\server\\CONTENT\\packagename.) にコピーします。</span><span class="sxs-lookup"><span data-stu-id="98782-122">When the original package is imported to the Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="98782-123">管理者が、ストリーミングサーバー上の SFT ファイルをポイントするように OSD ファイル内の HREF エントリを編集し、そのパッケージを管理サーバーにインポートします。</span><span class="sxs-lookup"><span data-stu-id="98782-123">The administrator edits the HREF entry in the OSD file to point to the SFT file on the Streaming Server, and then imports the package to the Management Server.</span></span>

<span data-ttu-id="98782-124">ストリーミングサーバーをセットアップするには、管理サーバーからストリーミングサーバー上のコンテンツフォルダーにパッケージフォルダーをコピーします。</span><span class="sxs-lookup"><span data-stu-id="98782-124">To set up the Streaming Server, the administrator copies the package folder from the Management Server to the CONTENT folder on the Streaming Server.</span></span> <span data-ttu-id="98782-125">このフォルダーの名前と相対パスは、管理サーバー上のストリーミングサーバーのコンテンツフォルダーの下にある必要があります。たとえば、\\\\streamingserver\\CONTENT\\packagename.</span><span class="sxs-lookup"><span data-stu-id="98782-125">This folder must have the same name and relative path under the Streaming Server’s CONTENT folder as on the Management Server, for example, \\\\streamingserver\\CONTENT\\packagename.</span></span>

<span data-ttu-id="98782-126">クライアントのアプリケーションソースルート (ASR) 設定がストリーミングサーバーを指すように構成されている場合、クライアントは OSD ファイルの HREF エントリで、サーバー名の代わりにこの設定を使います。</span><span class="sxs-lookup"><span data-stu-id="98782-126">If the client’s Application Source Root (ASR) setting is configured to point to the Streaming Server, the client uses this setting instead of the server name in the HREF entry in the OSD file.</span></span> <span data-ttu-id="98782-127">クライアント上の ISR フィールドと OSR フィールドは、必要に応じて、使用されている特定のシステムアーキテクチャに応じて、管理サーバーまたはストリーミングサーバーのいずれかを指すように構成することができます。</span><span class="sxs-lookup"><span data-stu-id="98782-127">The ISR and OSR fields on the client can optionally be configured to point to either the Management Server or the Streaming Server, depending on the specific system architecture that is used.</span></span>

<span data-ttu-id="98782-128">ユーザーが管理サーバーによって認証されると、サーバーはクライアントに applist.xml ファイルを送信してユーザーのアプリケーションを公開します。</span><span class="sxs-lookup"><span data-stu-id="98782-128">When a user is authenticated by the Management Server, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="98782-129">クライアントは、OSR と ISR のフィールドの設定に応じて、ストリーミングサーバーまたは管理サーバーからアプリケーションの OSD ファイルとアイコンを取得します。</span><span class="sxs-lookup"><span data-stu-id="98782-129">The client retrieves the OSD files and icons for the applications from either the Streaming Server or the Management Server, depending on the settings in the OSR and ISR fields.</span></span>

<span data-ttu-id="98782-130">ユーザーがアプリケーションアイコンをダブルクリックすると、クライアントは OSD ファイル HREF 要素に含まれているパッケージコンテンツファイル (SFT) へのパスを使用します。</span><span class="sxs-lookup"><span data-stu-id="98782-130">When the user double-clicks an application icon, the client uses the path to the package content file (SFT) that is contained in the OSD file HREF element.</span></span> <span data-ttu-id="98782-131">ASR が使われている場合、クライアントは、ASR に指定されているストリーミングサーバーへのパスを含む HREF 要素のサーバー名 (および使用されている場合は、ポートとプロトコル) を置き換えます。</span><span class="sxs-lookup"><span data-stu-id="98782-131">If the ASR is used the client replaces the server name (and port and protocol, if used) in the HREF element with the path to the Streaming Server that is specified in the ASR.</span></span> <span data-ttu-id="98782-132">その後、アプリケーションはストリーミングサーバーからクライアントキャッシュにストリーミングされ、開始されます。</span><span class="sxs-lookup"><span data-stu-id="98782-132">The application is then streamed from the Streaming Server to the client cache and is started.</span></span>

### <span data-ttu-id="98782-133">パッケージをアップグレードするには</span><span class="sxs-lookup"><span data-stu-id="98782-133">To upgrade the package</span></span>

<span data-ttu-id="98782-134">App-v Sequencer でアップグレードされたアプリケーションの新しいバージョンを追加するには、管理者は、新しいバージョンの SFT ファイルとその他の変更されたファイルを、ストリーミングサーバー上の元のバージョンのアプリケーションと同じフォルダーにコピーする必要があります。</span><span class="sxs-lookup"><span data-stu-id="98782-134">To add a new version of an application that has been upgraded in the App-V Sequencer, the administrator must copy the new version of the SFT file and any other modified files to the same folder as the original version of the application on the Streaming Server.</span></span>

<span data-ttu-id="98782-135">一貫性を保つため、管理サーバー上のフォルダーにも新しいファイルをコピーすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="98782-135">For consistency, we recommend that you copy new files to the folder on the Management Server as well.</span></span> <span data-ttu-id="98782-136">特に、クライアントの OSR または ISR のフィールドを使用する場合は、更新された OSD ファイルとアイコンを OSR と ISR の各フィールドに指定されているサーバーにコピーします。</span><span class="sxs-lookup"><span data-stu-id="98782-136">In particular, if you use the client’s OSR or ISR fields, copy the updated OSD file and icons to the server that is specified in the OSR and ISR fields.</span></span>

<span data-ttu-id="98782-137">ストリーミングサーバーによって新しいバージョンが検出されると、次回ユーザーがアプリケーションを起動したときに、サーバーはクライアントに自動的に新しいバージョンをストリームします。</span><span class="sxs-lookup"><span data-stu-id="98782-137">After the Streaming Server detects the new version, the next time the user starts the application, the server streams the new version to the client automatically.</span></span>

## <span data-ttu-id="98782-138">管理サーバーを公開用に使用し、ストリーミング用に IIS サーバーを使用する</span><span class="sxs-lookup"><span data-stu-id="98782-138">Using a Management Server for publishing and an IIS Server for streaming</span></span>


<span data-ttu-id="98782-139">このシナリオでは、App-v Management Server を使ってパッケージを公開し、IIS サーバーを使ってストリーミングパッケージとアプリケーションを使用します。</span><span class="sxs-lookup"><span data-stu-id="98782-139">In this scenario, the App-V Management Server is used for publishing the packages, and the IIS server is used for streaming packages and applications.</span></span> <span data-ttu-id="98782-140">管理サーバーに元のパッケージがインポートされると、管理者は、sequencer によって作成されたファイルを含むパッケージフォルダーをコンテンツフォルダー (たとえば、\\\\server\\CONTENT\\packagename.) にコピーします。</span><span class="sxs-lookup"><span data-stu-id="98782-140">When the original package is imported to the Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="98782-141">管理者が、IIS サーバー上の SFT ファイルをポイントするように OSD ファイル内の HREF エントリを編集し、そのパッケージを管理サーバーにインポートします。</span><span class="sxs-lookup"><span data-stu-id="98782-141">The administrator edits the HREF entry in the OSD file so it points to the SFT file on the IIS server, and then imports the package to the Management Server.</span></span>

<span data-ttu-id="98782-142">ストリーミング用に IIS サーバーを設定するために、管理者は、パッケージフォルダーを管理サーバーから IIS サーバーのコンテンツフォルダーにコピーします。</span><span class="sxs-lookup"><span data-stu-id="98782-142">To set up the IIS server for streaming, the administrator copies the package folder from the Management Server to the CONTENT folder on the IIS Server.</span></span> <span data-ttu-id="98782-143">このフォルダーの名前と相対パスは、管理サーバー上の IIS サーバーの Web コンテンツフォルダーと同じである必要があります。たとえば、IIS サーバーの URL には、またはを使用してアクセスでき http://IISserver/CONTENT/packagename https://IISserver/CONTENT/packagename ます。</span><span class="sxs-lookup"><span data-stu-id="98782-143">This folder must have the same name and relative path under the IIS server’s Web Content folder as on the Management Server; for example, the URL on the IIS Server can be accessed by using http://IISserver/CONTENT/packagename or https://IISserver/CONTENT/packagename.</span></span>

<span data-ttu-id="98782-144">クライアントのアプリケーションソースルート (ASR) 設定が、IIS サーバーを指すように構成されている場合、クライアントは OSD ファイルの HREF エントリでサーバー名の代わりに ASR を使用します。</span><span class="sxs-lookup"><span data-stu-id="98782-144">If the client’s Application Source Root (ASR) setting is configured to point to the IIS Server, the client uses the ASR instead of the server name in the HREF entry in the OSD file.</span></span> <span data-ttu-id="98782-145">必要に応じて、使用している特定のシステムアーキテクチャに応じて、管理サーバーまたは IIS サーバーを指すようにクライアントの ISR フィールドと OSR フィールドを構成することができます。</span><span class="sxs-lookup"><span data-stu-id="98782-145">You can optionally configure the ISR and OSR fields on the client to point to either the Management Server or the IIS Server, depending on the specific system architecture that you use.</span></span>

<span data-ttu-id="98782-146">管理サーバーがユーザーを認証すると、サーバーは applist.xml ファイルをクライアントに送信して、ユーザーのアプリケーションを公開します。</span><span class="sxs-lookup"><span data-stu-id="98782-146">When the Management Server authenticates the user, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="98782-147">クライアントは、ISR フィールドと OSR フィールドの設定に応じて、IIS サーバーまたは管理サーバーからアプリケーションの OSD ファイルとアイコンを取得します。</span><span class="sxs-lookup"><span data-stu-id="98782-147">The client retrieves the OSD files and icons for the applications from either the IIS Server or the Management Server, depending on the settings in the ISR and OSR fields.</span></span>

<span data-ttu-id="98782-148">ユーザーがアプリケーションアイコンをダブルクリックすると、クライアントは OSD ファイル HREF 要素に含まれているパッケージコンテンツファイル (SFT) へのパスを使用します。</span><span class="sxs-lookup"><span data-stu-id="98782-148">When the user double-clicks an application icon, the client uses the path to the package content file (SFT) that is contained in the OSD file HREF element.</span></span> <span data-ttu-id="98782-149">ASR が使われている場合、クライアントは、ASR に指定されている IIS サーバーへのパスを使用して、HREF 要素にサーバー名 (および使用されている場合は、ポートとプロトコル) を置き換えます。</span><span class="sxs-lookup"><span data-stu-id="98782-149">If the ASR is used the client replaces the server name (and port and protocol, if used) in the HREF element with the path to the IIS Server that is specified in the ASR.</span></span> <span data-ttu-id="98782-150">次に、アプリケーションは、HTTP (S) プロトコルを使って、IIS サーバーからクライアントキャッシュにストリーミングされ、開始されます。</span><span class="sxs-lookup"><span data-stu-id="98782-150">The application is then streamed from the IIS server to the client cache by using the HTTP(S) protocol and is started.</span></span>

### <span data-ttu-id="98782-151">パッケージをアップグレードするには</span><span class="sxs-lookup"><span data-stu-id="98782-151">To upgrade the package</span></span>

<span data-ttu-id="98782-152">パッケージをアップグレードする手順は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="98782-152">The procedure to upgrade the package is as follows:</span></span>

-   <span data-ttu-id="98782-153">新しいバージョンの OSD ファイルを、管理サーバーのコンテンツフォルダーの下にある元のバージョンのフォルダー (\\\\server\\CONTENT\\packagename など) にコピーして、既存の OSD ファイルを置き換えます。</span><span class="sxs-lookup"><span data-stu-id="98782-153">Copy the new version of the OSD file to the original version’s folder under the Management Server’s CONTENT folder, for example \\\\server\\CONTENT\\packagename, and replace the existing OSD file.</span></span> <span data-ttu-id="98782-154">整合性を保つには、他の変更されたファイルもコピーします。</span><span class="sxs-lookup"><span data-stu-id="98782-154">For consistency, copy any other modified files, too.</span></span> <span data-ttu-id="98782-155">クライアントの OSR または ISR のフィールドが使用されている場合は、更新された OSD ファイルとアイコンを、OSR フィールドと ISR フィールドで指定されているサーバーにコピーすることもできます。</span><span class="sxs-lookup"><span data-stu-id="98782-155">If the client’s OSR or ISR fields are used, then also copy the updated OSD file and icons to the server that is specified in the OSR and ISR fields.</span></span>

-   <span data-ttu-id="98782-156">新しいバージョンの SFT ファイルを、IIS サーバー上の Web コンテンツフォルダーの下にあるパッケージフォルダーにコピーします。たとえば、IIS サーバーの URL には、またはを使用してアクセスでき http://IISserver/CONTENT/packagename https://IISserver/CONTENT/packagename ます。</span><span class="sxs-lookup"><span data-stu-id="98782-156">Copy the new version of the SFT file to the package folder under the Web Content folder on the IIS server; for example, the URL on the IIS Server can be accessed by using http://IISserver/CONTENT/packagename or https://IISserver/CONTENT/packagename.</span></span>

<span data-ttu-id="98782-157">次の公開の更新時に、クライアントは新しいバージョンの OSD ファイルで更新されます。</span><span class="sxs-lookup"><span data-stu-id="98782-157">At the next publishing refresh, the client is updated with the new version of the OSD file.</span></span> <span data-ttu-id="98782-158">これで、このファイルは新しいバージョンの SFT ファイルを指します。そのため、ユーザーが次にアプリケーションアイコンをダブルクリックすると、新しいバージョンが開始されます。</span><span class="sxs-lookup"><span data-stu-id="98782-158">This file now points to the new version of the SFT file; therefore, when the user next double-clicks an application icon, the new version is started.</span></span>

## <span data-ttu-id="98782-159">管理サーバーを公開用に使用し、ストリーミング用にファイル共有を使用する</span><span class="sxs-lookup"><span data-stu-id="98782-159">Using a Management Server for publishing and a File Share for Streaming</span></span>


<span data-ttu-id="98782-160">このシナリオでは、App-v Management Server を使ってパッケージを公開し、ファイルサーバーをストリーミングパッケージとアプリケーションに使用します。</span><span class="sxs-lookup"><span data-stu-id="98782-160">In this scenario, the App-V Management Server is used for publishing the packages, and the file server is used for streaming packages and applications.</span></span> <span data-ttu-id="98782-161">管理サーバーに元のパッケージがインポートされると、管理者は、sequencer によって作成されたファイルを含むパッケージフォルダーをコンテンツフォルダー (たとえば、\\\\server\\CONTENT\\packagename.) にコピーします。</span><span class="sxs-lookup"><span data-stu-id="98782-161">When the original package is imported to the Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="98782-162">管理者は、ファイルサーバー上の SFT ファイルをポイントするように、OSD ファイルの HREF エントリを編集して、パッケージを管理サーバーにインポートします。</span><span class="sxs-lookup"><span data-stu-id="98782-162">The administrator edits the HREF entry in the OSD file so that it points to the SFT file on the file server, and imports the package to the Management Server.</span></span>

<span data-ttu-id="98782-163">ストリーミング用にファイルサーバーをセットアップするには、管理者がパッケージフォルダーを管理サーバーからファイルサーバー上のコンテンツフォルダーにコピーします。</span><span class="sxs-lookup"><span data-stu-id="98782-163">To set up the file server for streaming, the administrator copies the package folder from the Management Server to the CONTENT folder on the file server.</span></span> <span data-ttu-id="98782-164">このフォルダーは、管理サーバー上のファイルサーバーのコンテンツフォルダーの下に、たとえば \\\\fileserver\\CONTENT\\packagename. のような名前と相対パスを持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="98782-164">This folder must have the same name and relative path under the file server’s CONTENT folder as on the Management Server, for example \\\\fileserver\\CONTENT\\packagename.</span></span>

<span data-ttu-id="98782-165">\\\\Fileserver\\content などの UNC パスを使用してファイルサーバーを指すようにクライアントのアプリケーションソースルート (ASR) 設定が構成されている場合、クライアントは、OSD ファイルの HREF エントリで、サーバー名の代わりにこの設定を使います。</span><span class="sxs-lookup"><span data-stu-id="98782-165">If the client’s Application Source Root (ASR) setting is configured to point to the file server by using a UNC path, for example \\\\fileserver\\content, the client uses this setting instead of the server name in the HREF entry in the OSD file.</span></span> <span data-ttu-id="98782-166">必要に応じて、管理者は、使用されている特定のシステムアーキテクチャに応じて、管理サーバーまたはファイルサーバーのいずれかを指すようにクライアントの ISR フィールドと OSR フィールドを構成することができます。</span><span class="sxs-lookup"><span data-stu-id="98782-166">The administrator can optionally configure the ISR and OSR fields on the client to point to either the Management Server or the file server, depending on the specific system architecture being used.</span></span>

<span data-ttu-id="98782-167">管理サーバーがユーザーを認証すると、サーバーは applist.xml ファイルをクライアントに送信して、ユーザーのアプリケーションを公開します。</span><span class="sxs-lookup"><span data-stu-id="98782-167">When the Management Server authenticates the user, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="98782-168">クライアントは、ISR フィールドと OSR フィールドの設定に応じて、ファイルサーバーまたは管理サーバーからアプリケーションの OSD ファイルとアイコンを取得します。</span><span class="sxs-lookup"><span data-stu-id="98782-168">The client retrieves the OSD files and icons for the applications from either the file server or the Management Server, depending on the settings in the ISR and OSR fields.</span></span>

<span data-ttu-id="98782-169">ユーザーがアプリケーションアイコンをダブルクリックすると、クライアントは OSD ファイル HREF 要素に含まれているパッケージコンテンツファイル (SFT) へのパスを使用します。</span><span class="sxs-lookup"><span data-stu-id="98782-169">When the user double-clicks an application icon, the client uses the path to the package content file (SFT) that is contained in the OSD file HREF element.</span></span> <span data-ttu-id="98782-170">ASR が使われている場合、クライアントは、ASR 要素のサーバー名 (および使用されている場合は、ポートとプロトコル) を、ASR で指定されたファイルサーバーへのパスと置き換えます。</span><span class="sxs-lookup"><span data-stu-id="98782-170">If the ASR is used, the client replaces the server name (and port and protocol, if used) in the HREF element with the path to the file server that is specified in the ASR.</span></span> <span data-ttu-id="98782-171">その後、アプリケーションはファイルサーバーからクライアントキャッシュにストリーミングされ、開始されます。</span><span class="sxs-lookup"><span data-stu-id="98782-171">The application is then streamed from the file server to the client cache and is started.</span></span>

### <span data-ttu-id="98782-172">パッケージをアップグレードするには</span><span class="sxs-lookup"><span data-stu-id="98782-172">To upgrade the package</span></span>

<span data-ttu-id="98782-173">パッケージをアップグレードする手順は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="98782-173">The procedure to upgrade the package is as follows:</span></span>

-   <span data-ttu-id="98782-174">新しいバージョンの OSD ファイルを、管理サーバーのコンテンツフォルダーの下にある元のバージョンのフォルダー (\\\\server\\CONTENT\\packagename など) にコピーして、既存の OSD ファイルを置き換えます。</span><span class="sxs-lookup"><span data-stu-id="98782-174">Copy the new version of the OSD file to the original version’s folder under the Management Server’s CONTENT folder, for example \\\\server\\CONTENT\\packagename, replacing the existing OSD file.</span></span> <span data-ttu-id="98782-175">その他の変更されたファイルも、一貫性を維持するためにコピーする必要があります。</span><span class="sxs-lookup"><span data-stu-id="98782-175">Any other modified files should be copied as well for consistency.</span></span> <span data-ttu-id="98782-176">クライアントの OSR または ISR のフィールドが使用されている場合は、更新された OSD ファイルとアイコンを、OSR フィールドと ISR フィールドで指定されているサーバーにコピーすることもできます。</span><span class="sxs-lookup"><span data-stu-id="98782-176">If the client’s OSR or ISR fields are used, then also copy the updated OSD file and icons to the server that is specified in the OSR and ISR fields.</span></span>

-   <span data-ttu-id="98782-177">新しいバージョンの SFT ファイルを、ファイルサーバー上のコンテンツフォルダーの下にあるパッケージフォルダー (\\\\fileserver\\CONTENT\\packagename. など) にコピーします。</span><span class="sxs-lookup"><span data-stu-id="98782-177">Copy the new version of the SFT file to the package folder under the CONTENT folder on the file server, for example \\\\fileserver\\CONTENT\\packagename.</span></span> <span data-ttu-id="98782-178">\\\\Fileserver\\CONTENT\\packagename\\V1. などのファイルサーバー上のコンテンツ共有の下のフォルダーに、"SFT" ファイルをコピーします。</span><span class="sxs-lookup"><span data-stu-id="98782-178">Copy the V2 SFT file to the folder under the CONTENT share on the file server, for example \\\\fileserver\\CONTENT\\packagename\\V1.</span></span>

<span data-ttu-id="98782-179">次の公開時に、クライアントが新しいバージョンの OSD ファイルで更新されます。</span><span class="sxs-lookup"><span data-stu-id="98782-179">At the next publishing refresh the client is updated with the new version of the OSD file.</span></span> <span data-ttu-id="98782-180">このファイルは、新しいバージョンの SFT ファイルを指すようになりました。そのため、ユーザーが次にアプリケーションアイコンをダブルクリックすると、新しいバージョンが開始されます。</span><span class="sxs-lookup"><span data-stu-id="98782-180">This file now points to new version of the SFT file, so when the user next double-clicks an application icon, the new version is started.</span></span>

## <span data-ttu-id="98782-181">MSI ストリーミングモードを使用したパッケージのアップグレード</span><span class="sxs-lookup"><span data-stu-id="98782-181">Upgrading the package by using MSI Streaming mode</span></span>


<span data-ttu-id="98782-182">パッケージのシーケンス処理中に Windows Installer (MSI) ファイルを生成すると、sequencer によってが作成されます。必要なすべての公開情報が含まれている MSI ファイル。</span><span class="sxs-lookup"><span data-stu-id="98782-182">When you generate a Windows Installer (MSI) file during sequencing a package, the sequencer creates a .MSI file that contains all the necessary publishing information.</span></span> <span data-ttu-id="98782-183">管理者は、をコピーする必要があります。MSI ファイルをクライアントとに保存します。クライアントコンピューターがアクセスできるネットワーク共有にパッケージコンテンツを含む SFT ファイル。</span><span class="sxs-lookup"><span data-stu-id="98782-183">The administrator must copy the .MSI file to the client and the .SFT file containing the package content to a network share accessible by the client computer.</span></span>

<span data-ttu-id="98782-184">クライアントにアプリケーションを公開するには、クライアントコンピューターで次のコマンドを実行します。</span><span class="sxs-lookup"><span data-stu-id="98782-184">To publish the application to the client, run the following command on the client computer:</span></span>

   **<span data-ttu-id="98782-185">Msiexec.exe/i \\\\PathToMsi\\packagename.msi モード = ストリーミング OVERRIDEURL = \\ ¥¥¥ (ドメイン \\ パッケージ)</span><span class="sxs-lookup"><span data-stu-id="98782-185">Msiexec.exe /i \\\\PathToMsi\\packagename.msi MODE=STREAMING OVERRIDEURL=\\\\\\\\server\\share\\package.sft</span></span>**

<span data-ttu-id="98782-186">、.MSI ファイルは、クライアントにアプリケーションを発行して、をストリームします。SFT ファイルをクライアントキャッシュに保存します。</span><span class="sxs-lookup"><span data-stu-id="98782-186">The .MSI file publishes the applications to the client and then streams the .SFT file to the client cache.</span></span>

### <span data-ttu-id="98782-187">パッケージをアップグレードするには</span><span class="sxs-lookup"><span data-stu-id="98782-187">To upgrade the package</span></span>

<span data-ttu-id="98782-188">新しいバージョンを追加するには、管理者が新しいを展開する必要があります。MSI ファイルをクライアントに追加して、新しいを作成します。SFT ファイルをネットワーク共有に保存します。</span><span class="sxs-lookup"><span data-stu-id="98782-188">To add a new version, an administrator must deploy a new .MSI file to the client and a new .SFT file to the network share.</span></span> <span data-ttu-id="98782-189">次に、管理者は、パッケージの展開に使用したのと同じコマンドを実行しますが、新しいを使用する必要があります。MSI ファイルと新しいSFT ファイルの例:</span><span class="sxs-lookup"><span data-stu-id="98782-189">The administrator must then run the same command used to deploy the package, but use the new .MSI file and the new .SFT file, for example:</span></span>

   **<span data-ttu-id="98782-190">Msiexec.exe/i \\\\PathToMsi\\packagename\_2.msi モード = ストリーミング OVERRIDEURL = ¥¥¥¥¥¥¥ (パッケージ)</span><span class="sxs-lookup"><span data-stu-id="98782-190">Msiexec.exe /i \\\\PathToMsi\\packagename\_2.msi MODE=STREAMING OVERRIDEURL=\\\\\\\\server\\share\\package\_2.sft</span></span>**

 

 





