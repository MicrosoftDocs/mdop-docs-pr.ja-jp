---
title: サーバーを委任に対して信頼されるように構成する方法
description: サーバーを委任に対して信頼されるように構成する方法
author: dansimp
ms.assetid: d8d11588-17c0-4bcb-a7e6-86b5e4ba7e1c
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 06/16/2016
ms.openlocfilehash: 7164b3046671853216b870d68e651fed4fd84695
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/26/2020
ms.locfileid: "10817747"
---
# サーバーを委任に対して信頼されるように構成する方法


Microsoft Application Virtualization (App-v) Management Server ソフトウェアをインストールするときに、分散システムアーキテクチャを使用してインストールすることができます。 コンソール、管理 Web サービス、データベースを異なるコンピューターにインストールする場合は、インターネットインフォメーションサービス (IIS) サーバーが委任に対して信頼されるように構成する必要があります。 このことが必要になるのは、管理 Web サービスが、コンソールを使用している App-v 管理者の資格情報を使って、App-v データストアに接続しようとしているためです。 データストアがインストールされているデータベースサーバーは、IIS サーバーが委任に対して信頼されるように構成されている場合を除き、IIS サーバーからの管理者の資格情報を受け入れません。そのため、管理 Web サービスは、App-v データストアに接続できません。

**注** 1台のサーバーに App-v Management Server ソフトウェアをインストールして、データストアを別のサーバーに配置している場合は、管理 Web サービスと管理コンソールが同じサーバー上にある場合でも、委任に対して信頼されるようにサーバーを構成する必要があります。 この状況は、[**代替資格情報を使う**] オプションを使って、コンソールで管理 Web サービスに接続する必要がある場合に発生します。

 

使用できる委任の種類は、Active Directory ドメインサービス (ADDS) インフラストラクチャで構成したドメインの機能レベルによって異なります。 次の表に、App-v の各ドメインの機能レベルに対して構成できる委任の種類を示します。 詳しい手順については、次の表を参照してください。

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">ドメインの機能レベル</th>
<th align="left">利用可能な委任レベル</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>Windows 2000 ネイティブ</p></td>
<td align="left"><ul>
<li><p>委任なし (既定)</p></li>
<li><p>無制限の委任</p></li>
</ul></td>
</tr>
<tr class="even">
<td align="left"><p>Windows Server 2003、Windows Server 2008、または Windows Server 2008 R2</p></td>
<td align="left"><ul>
<li><p>委任なし (既定)</p></li>
<li><p>無制限の委任¹</p></li>
<li><p>制約付き委任 (Kerberos のみのプロトコルを使用)</p></li>
<li><p>制約付き委任 (任意の認証プロトコルを使用) ¹</p></li>
</ul></td>
</tr>
</tbody>
</table>

 

¹おすすめのものではありません。

## ドメインの機能レベルが Windows 2000 ネイティブの場合に、制約なし委任を構成するには


Web サーバーのドメインのドメインコントローラーで、次の手順を実行します。

****

1.  [**スタート**] をクリックし、[**管理ツール**] をクリックして、[ **Active Directory ユーザーとコンピューター**] をクリックします。

2.  [Domain] を展開し、[コンピューター] フォルダーを展開します。

3.  右側のウィンドウで、Web サーバーのコンピューター名を右クリックし、[**プロパティ**] をクリックします。

4.  [**全般**] タブで、[**コンピューターを委任用に信頼**する] チェックボックスがオンになっていることを確認します。

5.  **[OK]** をクリックします。

## ドメインの機能レベルが Windows Server 2003、windows Server 2008、または Windows Server 2008 R2 の場合に、制約のない委任を構成するには


Web サーバーのドメインのドメインコントローラーで、次の手順を実行します。

****

1.  [**スタート**] をクリックし、[**管理ツール**] をクリックして、[ **Active Directory ユーザーとコンピューター**] をクリックします。

2.  [Domain] を展開し、[コンピューター] フォルダーを展開します。

3.  右側のウィンドウで、Web サーバーのコンピューター名を右クリックし、[**プロパティ**] を選択して、[**委任**] タブをクリックします。

4.  [**すべてのサービスに対する委任に対してこのコンピューターを信頼する (Kerberos のみ)**] をクリックして選択します。

5.  **[OK]** をクリックします。

## ドメインの機能レベルが Windows Server 2003、Windows Server 2008、または Windows Server 2008 R2 の場合に、制約付き委任を構成するには


Web サーバーのドメインのドメインコントローラーで、次の手順を実行します。

****

1.  [**スタート**] をクリックし、[**管理ツール**] をクリックして、[ **Active Directory ユーザーとコンピューター**] をクリックします。

2.  [Domain] を展開し、[コンピューター] フォルダーを展開します。

3.  右側のウィンドウで、Web サーバーのコンピューター名を右クリックし、[**プロパティ**] を選択して、[**委任**] タブをクリックします。

4.  [指定し**たサービスに対する委任に対してこのコンピューターを信頼**する] をクリックして選択します。

5.  [ **Kerberos のみを使用**] が選択されていることを確認し、[ **OK]** をクリックします。

6.  **[追加]** ボタンをクリックします  [**サービスの追加**] ダイアログボックスで、[**ユーザーまたはコンピューター**] をクリックし、app-v データストアがある Microsoft SQL server の名前を参照または入力して、IIS からユーザー資格情報を受け取ります。 **[OK]** をクリックします。

7.  [**使用可能なサービス**] ボックスの一覧で、Microsoft SQL Server が app-v データベースへの接続を許可しているポート番号を一覧表示する MSSQLSvc サービスを選択します (既定のポートは 1433)。 **[OK]** をクリックします。

### 制約付き委任用に IIS 7 を構成するための追加の手順

IIS 7 サーバーで管理 Web サービスを実行している場合は、次の手順を実行して、IIS 7 *useAppPoolCredentials*変数を True に設定する必要があります。

1.  昇格したコマンドプロンプトウィンドウを開きます。 昇格したコマンドプロンプトウィンドウを開くには、[**スタート**] をクリックし、[**すべてのプログラム**]、[**アクセサリ**]、[**コマンドプロンプト**] を右クリックして、[**管理者として実行**] をクリックします。

2.  %Windir%\\system32\\inetsrv. に移動する

3.  「appcmd.exe 設定」と入力します。 **「system.webserver/security/authentication/windowsAuthentication-useAppPoolCredentials: true**」と入力して、enter キーを押します。

 

 





