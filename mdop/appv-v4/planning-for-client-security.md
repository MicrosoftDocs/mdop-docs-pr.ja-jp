---
title: クライアントのセキュリティの計画
description: クライアントのセキュリティの計画
author: dansimp
ms.assetid: 4840a60f-4c91-489c-ad0b-6671882abf9b
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: e0038f7cbc8592d6c7fcdfa485111da88c17791d
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/26/2020
ms.locfileid: "10815934"
---
# クライアントのセキュリティの計画


App-v クライアントには、以前のバージョンの製品では提供されていないセキュリティの拡張機能がいくつか用意されています。 これらの変更により、インストール後およびクライアント設定の後の構成により、セキュリティが強化されます。 このトピックでは、これらの拡張機能の一部について説明し、計画プロセスで考慮する必要がある重要なセキュリティ関連の構成設定をいくつか示します。 仮想アプリケーションは依然として実行可能であることを覚えておく必要があります。そのため、これらのアセットは、不正ユーザーによって改ざんされないようにする必要があります。 このため、このトピックの後半で説明するように、Open Software Descriptor (OSD) ファイルキャッシュは、このトピックで後述するように保護されています。 RTSPS、HTTPS、IPsec を使用してパブリッシングとストリーミングを保護することを強くお勧めします。

## App-v クライアントセキュリティ


既定では、インストール時に、ユーザーが発行の更新を実行してアプリケーションを起動するために必要な最低限のアクセス許可を持つ App-v クライアントが構成されます。 App-v クライアントで提供されるその他のセキュリティ強化機能には、次のようなものがあります。

-   既定では、OSD ファイルキャッシュは管理者のみが更新できます。また、発行更新プロセスを使うこともできます。

-   ログファイル (sftlog.txt) は、クライアントへのローカル管理アクセス権を持つアカウントによってのみアクセスできます。

-   ログファイルに最大サイズが設定されました。

### ファイルの種類の関連付け

既定では、クライアントのインストールによって OSD ファイルのファイルの種類の関連付け (FTAs) が登録されます。これにより、ユーザーは公開されたショートカットではなく OSD ファイルから直接アプリケーションを起動することができます。 ローカル管理者の権限を持つユーザーが、悪意のあるコードを含む OSD ファイル (電子メールまたは Web サイトからダウンロードしたもの) を受信した場合、ユーザーは OSD ファイルを開き、クライアントが**アプリケーション**のアクセス許可を制限するように設定されていても、アプリケーションを起動することができます。 このリスクを軽減するために、「FTAs」という OSD の登録を解除することができます。 また、メールシステムとファイアウォールでこの拡張機能をブロックすることも検討してください。 拡張機能をブロックするように Outlook を構成する方法については、を参照してください <https://go.microsoft.com/fwlink/?LinkId=133278> 。

**セキュリティに関するメモ:**

App-v バージョン4.6 以降では、クライアントの新規インストール時に、OSD ファイルのファイルの種類の関連付けは作成されません。ただし、既存の設定は、App-v クライアントのバージョン4.2 または4.5 からのアップグレード中に維持されます。 何らかの理由でファイルの種類の関連付けを作成することが重要である場合は、次のレジストリキーを作成して、次のように値を設定できます。

    Create HKEY\_CLASSES\_ROOT\\.osd with a default value of SoftGrid.osd.File

    Under HKEY\_LOCAL\_MACHINE\\software\\classes\\Softgrid.osd.file, create a string value named AppUserModelID with a data value of Microsoft.AppV.Client.Tray

### Authorization

インストール時には、 **Requireauthorizationifcached**パラメーターを使って、ユーザーがアプリケーションを起動しようとしたときにサーバーからの認証を要求するようにクライアントを構成することができます。 このパラメーターの設定方法について慎重に検討する必要があります。 何らかの理由で App-v サーバーが利用できない場合、アプリケーションはこのパラメーターの最新の保存された状態を使って、アプリケーションへのユーザーアクセスを制御します。 ユーザーがアプリケーションを正常に起動せずに、アプリが実行されなくなった場合は、サーバーと通信して承認を受けるまでアプリケーションを起動することはできません。 ただし、クライアントが認証を必要としないようにパラメーターを設定し、サーバーが利用できない場合は、以前にキャッシュされたすべてのアプリケーションを、承認されたかどうかにかかわらず開始できます。 また、ユーザーにアクセス許可を使用してオフラインモードで動作するようにクライアントを変更する権限がある場合、またはユーザーがローカル管理者である場合は、App-v インフラストラクチャを利用できない場合と同様に、キャッシュされたパッケージをすべて開くことができます。

### ウイルス対策スキャン

App-v クライアントコンピューターで実行されているウイルス対策ソフトウェアにより、仮想環境の感染したファイルを検出して報告することができます。 ただし、ファイルをウイルス駆除することはできません。 仮想環境でウイルスが検出された場合、ウイルス対策ソフトウェアは、実際のパッケージではなく、キャッシュ内で構成済みの検疫または修復操作を実行します。 Fsd ファイルの例外を使ってウイルス対策ソフトウェアを構成します。 このファイルは、App-v クライアントでパッケージを保存するキャッシュファイルです。

**セキュリティに関するメモ:**

運用環境に展開されたアプリケーションまたはパッケージでウイルスが検出された場合は、そのアプリケーションまたはパッケージをウイルスに感染していないバージョンに置き換えます。

## クライアントとサーバーの間の通信


公開の更新とパッケージストリーミングも、クライアントとサーバー間の通信に関連するセキュリティ上の考慮事項が重要な部分です。

### 公開の更新

クライアントがサーバーと通信して公開の更新を実行すると、ログオンしているユーザーの資格情報を使って、アプリケーションパッケージに関する情報が要求されます。 App-v client と App-v Management Server の間で発生した通信をセキュリティで保護して、どの公開情報も転送中に改ざんされないようにします。 これは、RTSPS/HTTPS を使用する強化されたセキュリティオプションを使用することで行われます。 クライアントと、ICO および OSD ファイルが保存されている場所の間の通信では、IIS サーバーに対して SMB/CIFS 共有と HTTPS に対して IPsec を使用する必要があります。

**注** IIS を使って ICO ファイルと OSD ファイルを公開する場合は、OSD = TXT の MIME タイプを構成します。そうしないと、IIS は、ICO ファイルと OSD ファイルをクライアントに提供することを拒否します。

 

### パッケージストリーミング

ユーザーがアプリケーションを初めて起動した場合、またはクライアントで自動読み込みパラメーターが設定されている場合は、アプリケーションパッケージがサーバーからクライアントキャッシュにストリーミングされます。 このプロセスでは、RTSP/RTSPS、HTTP/HTTPS、SMB/CIFS プロトコルがサポートされています。 OSD ファイルは、クライアントで**ApplicationSourceRoot**または**overrideurl**の設定が構成されていない限り、どのプロトコルを使用するかを制御します。 より高いレベルのセキュリティを実現するには、SMB/CIFS の RTSPS、HTTPS、または IPsec 経由で通信を構成する必要があります。 使用する通信方法の選択の詳細については、「App-v の計画と展開ガイド」を参照してください <https://go.microsoft.com/fwlink/?LinkId=122063> 。

**注** IIS を使用してパッケージ (SFT ファイル) を公開している場合は、SFT = Binary の MIME タイプを構成します。そうしないと、IIS は、SFT ファイルをクライアントに提供することを拒否します。

 

### ローミングプロファイルとフォルダリダイレクション

App-v システムは、usrvol \ _sftfs \ _v1 .pkg ファイルのパッケージに対するユーザー固有の変更を保存します。 このファイルは、ユーザーのプロファイルのアプリケーションデータフォルダーにあります。 プロファイルまたはリダイレクトされたアプリケーションデータフォルダーは、クライアントとサーバーの間で転送されるため、IPsec を使って通信をセキュリティで保護します。

## インターネットに接続しているクライアントに関する考慮事項


インターネットに接続しているクライアントの場合、クライアントがドメインに参加しているか、ドメイン以外に参加しているかを検討することが重要です。

### ドメインに参加しているクライアント

既定では、App-v クライアントは、イントラネット上の認証と承認のために Active Directory ドメインサービスによって発行された Kerberos チケットを使用します。 既定では、これらの Kerberos チケットは10時間有効です。 クライアントは、このチケットを使って、チケットが有効である限り、コンピューターがドメインコントローラーに接続してチケットを更新できない場合でも、このチケットを使用してアプリ-V server にアクセスします。 Kerberos チケットの有効期限が切れた場合、App-v クライアントは NTLM 認証に戻り、ユーザーのキャッシュされた資格情報を使用します。

### ドメインに参加していないクライアント

ユーザーが自宅ベースであり、コンピューターが会社のドメインに参加していない場合は、アプリケーションの配信は引き続きサポートされます。 公開の更新を実行してアプリケーションを起動するようにユーザーを認証して承認するには、クライアントコンピューターでユーザーアカウントを構成し、そのユーザー名とパスワードを保存し、そのアプリケーションに対する適切なアクセス許可を付与します。

## 関連トピック


[セキュリティと保護の計画](planning-for-security-and-protection.md)

 

 





