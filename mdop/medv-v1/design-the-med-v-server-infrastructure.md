---
title: MED-V サーバー インフラストラクチャを設計する
description: MED-V サーバー インフラストラクチャを設計する
author: dansimp
ms.assetid: 2781040f-880e-4e16-945d-a38c0adb4151
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: 4ba4c38328c5484b7daa292f9fc33a4e59824327
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/26/2020
ms.locfileid: "10824184"
---
# MED-V サーバー インフラストラクチャを設計する


このトピックでは、各 MED-V インスタンスのサーバーインフラストラクチャを設計します。 これには、SQL Server インスタンスが MED-V サーバーに存在するか、リモートサーバー上にあるかと、SQL Server データベースのサイズが指定されているかを確認することが含まれます。 管理コンソールの場所も決定されます。

## 各 MED-V インスタンス用にサーバーを設計して配置する


MED-V サーバーは、ポリシーを実装し、クライアントに関する状態と履歴データを格納します。

### フォームファクター

MED-V では、2 GB の RAM で 2.8 GHz デュアルコア CPU サーバーを使用することをお勧めします。 この推奨事項は、MED-V サーバーが専用のコンピューターで実行されることを前提としており、SQL Server と MED-V の管理コンソールが別々のコンピューターで実行されることを前提としています。

この作業負荷の場合、MED-V サーバーは比較的負荷の低い状態にする必要があります。 サーバーフォームファクターに具体的なアーキテクチャガイダンスがない場合は、MED-V 勧告を使用してサーバーを設計し、組織の標準のフォームファクターと一致するメモリを使用します。 MED-V サーバーは、Windows Server2008 Hyper-v の仮想マシン (VM) で実行できます。 VM を使用する場合は、物理マシンに対して指定されているものと同等の CPU とメモリリソースにアクセスできることを確認します。

Med-v サーバーが必要とするディスク容量は、MED-V ワークスペース構成ファイルを保存するのに十分なものである必要があります。 MED-V ワークスペースでは、1つ以上のユーザーに対して1つの VM と1つのポリシーのみを使用できます。 したがって、保存する必要がある MED-V ワークスペースの数は、同じ VM のユーザーごとに異なるポリシーが必要となる程度、および使用される Vm の数によって異なります。 MED-V ワークスペースの XML ファイルは、標準の MED-V ワークスペースで約30KB のサイズになります。 必要なディスク容量を判断するには、MED-V サーバーが格納する MED-V ワークスペースの数を 30 KB にします。

MED-V サーバーの最も重要なネットワーク接続はクライアントへのリンクです。そのため、利用可能な帯域幅の最も高いネットワーク上の場所にサーバーを配置します。そのため、クライアントへの最も信頼性の高いリンクを提供します。

### フォールトトレランス

有効な MED-V サーバーは、MED-V インスタンスには1つしか使用できません。また、MED-V には、サーバーを Microsoft Cluster Server (MSCS) クラスターに配置してフォールトトレランスを提供するための標準機能は含まれていません。 パッシブバックアップサーバーを手動で構成することができます。

パッシブバックアップサーバーを MED-V インスタンス用に手動で構成する必要があるかどうかを判断するには、オフラインモードでの MED-V イメージの使用をユーザーに許可するかどうかを決定します。 オフラインモードの詳細について[は、「ドメインユーザーまたはグループを構成する方法](how-to-configure-a-domain-user-or-groupmedvv2.md)」を参照してください。 ユーザーがオフラインで作業することを許可されていない場合は、med-v ワークスペースがクライアントで既に開始されている場合でも、MED-V サーバーの障害が発生した場合でも操作を続行することはできません。 各 MED-V ワークスペースに対してオフライン作業が許可されている場合は、認証を必要とする前に、クライアントがオフラインで作業できる期間を決定します。 この値は、サーバーを利用できない最大時間です。

## SQL Server データベースの設計と配置


MED-V サーバーでは、SQL Server データベースを使ってクライアントの状態とイベントを保存します。 SQL Server データベースは、MED-V サーバーと同じコンピューター上にインストールすることも、SQL Server を実行している別のサーバー上に配置することもできます。これは、必要に応じてリモートでもかまいません。 データベースを他の MED-V インスタンスと共有することができます。この場合、これらのインスタンスからのイベントと警告は同じデータベースに格納され、レポートにはすべてのインスタンスからのイベントが含まれます。 既存の SQL Server インスタンスにデータベースをインストールして、他の MED-V サーバーのデータベースを同じインスタンスに配置することができます。

MED-V サーバーのリモートの場所にデータベースサーバーを配置する場合、十分な帯域幅がないネットワークリンク間では、レポートが本体に読み込まれず、クライアントからの最新データが表示されないことがあります。 「[プロジェクトの範囲を定義](define-the-project-scope.md)する」で決定した組織のサービスレベルの要件を参照し、その情報を使用して SQL Server データベースを配置する場所を決定します。

### フォームファクター

SQL Server を MED-V と同じサーバーで実行し、SQL Server がそのサーバーのデータを保存するためだけに使用される場合は、MED-V の推奨事項から始めて、SQL Server のロード用のリソースを追加します。 SQL Server が複数の MED-V インスタンスからイベントとアラートを格納する場合、サーバーフォームファクターのスケールアップの詳細については、「[インフラストラクチャの計画と設計 MICROSOFT SQL Server 2008](https://go.microsoft.com/fwlink/?LinkId=163302)ガイド (http://go.microsoft.com/fwlink/?LinkId=163302)」を参照してください。

データベースのサイズは、データベースに保存されるクライアントイベントの数によって異なります。 イベントは、MED-V ワークスペースが開始された場合や、MED-V ワークスペースにエラーが発生した場合など、クライアントの通常の操作によって作成されます。 クライアントがイベントを送信する既定の間隔は1分です。

データベースのサイズを見積もるには、次のことを確認します。

-   MED-V インスタンスのクライアント数。 最大値は5000です。

-   一般的なイベント到着率。 この率はクライアントの使用の動作によって異なりますが、クライアントごとの1日あたり約 15 ~ 20 イベントになります。

-   イベントサイズ。 通常、サイズは約200バイトです。

-   容量。 イベントが保存される日数。

これらの値を組み合わせて、必要なデータ記憶域のサイズ (バイト単位) を計算し、次の項目を考慮して安全係数を追加します。

-   このエラーは、短時間でクライアントから大量のイベントを作成する可能性があります。

-   データベーステーブルと組織用スペース。

インフラストラクチャ最適化の毎秒 (IOPs) 要件を推定するには、上記の値を使って、通常のイベント着信率をインスタンスのクライアント数で乗算します。 これにより、1日に書き込むことができるレコード数が返されます。 この数値を86400で除算して、1秒あたりに書き込まれたレコード数を導出します。 1つのインフラストラクチャ最適化 (IO) 操作で書き込み操作を equated できる場合、この数値は、必要な書き込み IOPs です。 レポートアクティビティ用のバッファーを追加します。 この場合、そのインスタンスで使用されている本体の数と、レポートを生成するために使用する頻度によって判断が困難です。

### フォールトトレランス

MED-V クライアントを実行しているときに、サーバーが利用できない場合、クライアントでイベントがバックアップされ、管理コンソールではレポートを使用できなくなります。 「[プロジェクトのスコープを定義](define-the-project-scope.md)する」で判断された、フォールトトレラントな SQL Server インフラストラクチャの設計が必要かどうかを決定する、組織のサービスレベルについて参照してください。

MED-V は、MSCS クラスターで SQL Server を実行するためのサポートを提供していません。 ウォームスタンバイを提供し、エラーが発生した場合のデータの損失を防ぐために、SQL Server をログ配布構成に配置できます。 ログの配布の詳細については、「 [MICROSOFT SQL Server 2008 ガイド () のインフラストラクチャ計画と設計](https://go.microsoft.com/fwlink/?LinkId=163302)」を参照してください https://go.microsoft.com/fwlink/?LinkId=163302) 。

## 管理コンソールの設計


MED-V 管理コンソールの機能の一部は、MED-V クライアントに配布するためにパックされる前に、Vm をテストすることです。 そのため、管理コンソールは、一般的な MED-V クライアントマシンのフォームファクターで可能な限り近いフォームファクターで設計する必要があります。

管理コンソールアプリケーションは、MED-V クライアントと共にインストールされ、microsoft のサポート技術情報の記事974918で説明されている修正プログラムと共に Microsoft Virtual PC2007 SP1 を使用します。 クライアントオペレーティングシステムを使用する必要があります。med-v 管理コンソールは、MED-V サーバーと同じシステム上で実行することはできません。

管理コンソールを複数の MED-V サーバーインスタンスと共有することはできません。 MED-V サーバーのアドレスは、管理コンソールの MED-V クライアントのインストール中に指定されます。この操作はインストール後に変更できますが、いつでも、管理コンソールは1つの MED-V サーバーでしか動作できません。

複数の管理コンソールは、単一の MED-V サーバーで使うことができます。 競合を避けるために、ある本体が MED-V ワークスペースに変更を加えたときに、他のコンソールユーザーに通知するメカニズムを利用できます。

各 MED-V インスタンスについて、必要な管理コンソールの数と配置場所を決定します。 管理コンソールに使用する一般的な MED-V クライアントのフォームファクターを選択します。

## 関連トピック


[MED-V 1.0 SP1 でサポートされる構成](med-v-10-sp1-supported-configurationsmedv-10-sp1.md)

[クラスター モードの MED-V サーバーの構成](configuring-med-v-server-for-cluster-mode.md)

[MED-V クライアントと MED-V 管理コンソールをインストールする方法](how-to-install-med-v-client-and-med-v-management-console.md)

[MED-V 管理コンソールのユーザー インターフェイスの使用](using-the-med-v-management-console-user-interface.md)

 

 





